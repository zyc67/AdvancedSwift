```swift
     let numbers = [1, 2, 3, 4]

     let mapped = numbers.map { Array(repeating: $0, count: $0) }
     // [[1], [2, 2], [3, 3, 3], [4, 4, 4, 4]]

     let flatMapped = numbers.flatMap { Array(repeating: $0, count: $0) }
     // [1, 2, 2, 3, 3, 3, 4, 4, 4, 4]
```
### flatMap 的函数签名看起来和 map 基本一致，只是它的变换函数返回的是一个数组。在实现中，它使用 append(contentsOf:) 代替了 append(_:)，这样返回的数组是展平的了
### flatMap 的另一个常见使用情景是将不同数组里的元素进行合并。为了得到两个数组中元素的所有配对组合，我们可以对其中一个数组进行 flatMap，然后在变换函数中对另一个数组进行 map 操作：
```swift 
     let suits = ["♠︎", "♥︎", "♣︎", "♦︎"]
     let ranks = ["J","Q","K","A"]
     let result = suits.flatMap { suit in
          ranks.map { rank in
               (suit, rank)
          }
     }
     /*
     [("♠︎", "J"), ("♠︎", "Q"), ("♠︎", "K"), ("♠︎", "A"), ("♥︎", "J"), ("♥︎",
     "Q"), ("♥︎", "K"), ("♥︎", "A"), ("♣︎", "J"), ("♣︎", "Q"), ("♣︎", "K"),
     ("♣︎", "A"), ("♦︎", "J"), ("♦︎", "Q"), ("♦︎", "K"), ("♦︎", "A")]
     */
```